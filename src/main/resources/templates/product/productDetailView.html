<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<html xmlns:th="http://www.thymeleaf.org">
<th:block th:replace="~{/basic :: setContent(~{this::contentFrag})}">
    <th:block th:fragment="contentFrag">

    <article id="article">
        <div class="proudct">

            <div class="product_btns">
                <button>M O D I F Y</button>
                <button>D E L E T E</button>
                <button><a th:href="@{/products}"> L I S T </a></button>
            </div>

            <div class="detail_box">
                <div class="product_img">
                    <img th:src="@{'/uploadfile/'+${img.getStoreFileName()}}">
                </div>

                <div class="product_info">
                    <p class="product_name">[[${product.productName}]]</p>
                    <select class="product_select">
                        <option>- SELECT 1 -</option>
                        <option>Option 1</option>
                        <option>Option 2</option>
                        <option>Option 3</option>
                    </select>
                    <br>

                    <select class="product_select">
                        <option>- SELECT 2 -</option>
                        <option>Option 1</option>
                        <option>Option 2</option>
                        <option>Option 3</option>
                    </select>

                    <br>
                    <button class="minusBtn"><</button> <span class="quantity" style="font-size: 40px; vertical-align: middle;">1</span> <button class="plusBtn">></button>
                    <p class="price" style="display: inline-block;" th:text="${product.productPrice}">10000</p> <span style="font-size: 16px;">원</span>
                    <button>장바구니</button>
                    <button>주문하기</button>

                </div>
            </div>
            <div class="product_info_img">
                <img th:src="@{'/uploadfile/'+${img.getStoreFileName()}}">
                <p th:text="${product.productScript}">정말 좋은 향수네요.</p>
            </div>
        </div>
    </article>

    <!-- article -->

    </th:block>
</th:block>

    <script>
        let quantity = document.querySelector('.quantity');
        let plusBtn = document.querySelector('.plusBtn');
        let minusBtn = document.querySelector('.minusBtn');
        let price = document.querySelector('.price');
        let q = 1;
        let qinit = document.querySelector('.price')
        const plusq = parseInt(qinit.textContent);

        plusBtn.addEventListener('click', e => {
        
            if (q < 10) {
                ++q;
                quantity.innerHTML = q;
                plusTotalPrice();
            }else{
                alert("구매 개수를 초과하셨습니다.")
            }

            
        })

        minusBtn.addEventListener('click', e => {
            if (q > 1) {
                --q;
                quantity.innerHTML = q;
                minusTotalPrice();
            }
        })

        function plusTotalPrice() {
            let totalPrice = parseInt(price.textContent) + plusq;
            console.log(totalPrice);
            price.innerHTML = totalPrice;
        }

        function minusTotalPrice() {
            let totalPrice = parseInt(price.textContent) - plusq;
            console.log(totalPrice);
            price.innerHTML = totalPrice;
        }
    </script>

</body>

</html>